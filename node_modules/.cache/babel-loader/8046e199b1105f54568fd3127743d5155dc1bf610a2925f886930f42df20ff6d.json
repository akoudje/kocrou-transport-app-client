{"ast":null,"code":"// client/src/admin/pages/AdminReports.js\nimport React,{useEffect,useState}from\"react\";import{motion}from\"framer-motion\";import{FileText,Loader2,Download,BarChart3,PieChart,CalendarDays}from\"lucide-react\";import Swal from\"sweetalert2\";import*as XLSX from\"xlsx\";import jsPDF from\"jspdf\";import\"jspdf-autotable\";import smartApi from\"../../utils/smartApi\";import{BarChart,Bar,XAxis,YAxis,Tooltip,Legend,ResponsiveContainer,Pie,PieChart as RPieChart,Cell}from\"recharts\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminReports=()=>{var _reportData$totalRese3,_reportData$totalReve3,_reportData$validated3,_reportData$cancelled3;const[reportData,setReportData]=useState(null);const[loading,setLoading]=useState(true);const[monthFilter,setMonthFilter]=useState(\"\");const token=localStorage.getItem(\"token\");// ðŸŽ¯ Charger les donnÃ©es du backend (robuste : accepte data.data ou data)\nconst fetchReport=async()=>{try{var _ref,_data$data;setLoading(true);const{data}=await smartApi.get(\"/reports?month=\".concat(monthFilter),{headers:{Authorization:\"Bearer \".concat(token)}});// supporte { data: {...} } ou {...}\nsetReportData((_ref=(_data$data=data===null||data===void 0?void 0:data.data)!==null&&_data$data!==void 0?_data$data:data)!==null&&_ref!==void 0?_ref:null);}catch(err){console.error(\"Erreur chargement rapport :\",err);Swal.fire(\"Erreur\",\"Impossible de charger les rapports.\",\"error\");setReportData(null);}finally{setLoading(false);}};useEffect(()=>{fetchReport();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[monthFilter]);// ðŸ“Š GÃ©nÃ©ration Excel (sÃ©curisÃ©e)\nconst exportToExcel=()=>{var _reportData$totalRese,_reportData$totalReve,_reportData$validated,_reportData$cancelled;if(!reportData){Swal.fire(\"Aucune donnÃ©e\",\"Aucun rapport Ã  exporter.\",\"info\");return;}const wb=XLSX.utils.book_new();const reservations=Array.isArray(reportData.reservations)?reportData.reservations:[];const reservationsSheet=XLSX.utils.json_to_sheet(reservations);XLSX.utils.book_append_sheet(wb,reservationsSheet,\"RÃ©servations\");const statsSheet=XLSX.utils.json_to_sheet([{\"Total RÃ©servations\":(_reportData$totalRese=reportData.totalReservations)!==null&&_reportData$totalRese!==void 0?_reportData$totalRese:0,\"Total Revenus\":\"\".concat(Number((_reportData$totalReve=reportData.totalRevenue)!==null&&_reportData$totalReve!==void 0?_reportData$totalReve:0).toLocaleString(),\" FCFA\"),\"RÃ©servations ValidÃ©es\":(_reportData$validated=reportData.validatedCount)!==null&&_reportData$validated!==void 0?_reportData$validated:0,\"RÃ©servations AnnulÃ©es\":(_reportData$cancelled=reportData.cancelledCount)!==null&&_reportData$cancelled!==void 0?_reportData$cancelled:0}]);XLSX.utils.book_append_sheet(wb,statsSheet,\"Statistiques\");XLSX.writeFile(wb,\"rapport_kocrou_transport.xlsx\");};// ðŸ“„ GÃ©nÃ©ration PDF (sÃ©curisÃ©e)\nconst exportToPDF=()=>{var _reportData$totalRese2,_reportData$totalReve2,_reportData$validated2,_reportData$cancelled2;if(!reportData){Swal.fire(\"Aucune donnÃ©e\",\"Aucun rapport Ã  exporter.\",\"info\");return;}const doc=new jsPDF();doc.setFontSize(14);doc.text(\"Rapport Kocrou Transport\",14,20);doc.text(\"P\\xE9riode : \".concat(monthFilter||\"Tous les mois\",\" - G\\xE9n\\xE9r\\xE9 le \").concat(new Date().toLocaleDateString(\"fr-FR\")),14,28);doc.autoTable({startY:35,head:[[\"Type\",\"Valeur\"]],body:[[\"Total RÃ©servations\",(_reportData$totalRese2=reportData.totalReservations)!==null&&_reportData$totalRese2!==void 0?_reportData$totalRese2:0],[\"Total Revenus\",\"\".concat(Number((_reportData$totalReve2=reportData.totalRevenue)!==null&&_reportData$totalReve2!==void 0?_reportData$totalReve2:0).toLocaleString(),\" FCFA\")],[\"ValidÃ©es\",(_reportData$validated2=reportData.validatedCount)!==null&&_reportData$validated2!==void 0?_reportData$validated2:0],[\"AnnulÃ©es\",(_reportData$cancelled2=reportData.cancelledCount)!==null&&_reportData$cancelled2!==void 0?_reportData$cancelled2:0]]});doc.save(\"rapport_kocrou_transport.pdf\");};const COLORS=[\"#3B82F6\",\"#10B981\",\"#F59E0B\",\"#EF4444\"];// Valeurs sÃ©curisÃ©es pour l'affichage\nconst totalReservations=(_reportData$totalRese3=reportData===null||reportData===void 0?void 0:reportData.totalReservations)!==null&&_reportData$totalRese3!==void 0?_reportData$totalRese3:0;const totalRevenue=Number((_reportData$totalReve3=reportData===null||reportData===void 0?void 0:reportData.totalRevenue)!==null&&_reportData$totalReve3!==void 0?_reportData$totalReve3:0);const validatedCount=(_reportData$validated3=reportData===null||reportData===void 0?void 0:reportData.validatedCount)!==null&&_reportData$validated3!==void 0?_reportData$validated3:0;const cancelledCount=(_reportData$cancelled3=reportData===null||reportData===void 0?void 0:reportData.cancelledCount)!==null&&_reportData$cancelled3!==void 0?_reportData$cancelled3:0;const dailyStats=Array.isArray(reportData===null||reportData===void 0?void 0:reportData.dailyStats)?reportData.dailyStats:[];return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 dark:bg-background-dark p-6\",children:/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:0.5},className:\"max-w-6xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-center gap-4 mb-8\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold text-text-light dark:text-text-dark flex items-center gap-2\",children:[/*#__PURE__*/_jsx(FileText,{className:\"w-6 h-6 text-primary\"}),\" Rapports & Statistiques\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-3 items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(CalendarDays,{className:\"text-primary w-4 h-4\"}),/*#__PURE__*/_jsx(\"input\",{type:\"month\",value:monthFilter,onChange:e=>setMonthFilter(e.target.value),className:\"border rounded-lg px-3 py-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchReport,className:\"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition\",children:\"Actualiser\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:exportToExcel,className:\"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4\"}),\" Excel\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:exportToPDF,className:\"flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4\"}),\" PDF\"]})]})]}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center items-center py-20 text-gray-500 dark:text-gray-400\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"animate-spin w-6 h-6 mr-2 text-primary\"}),\"Chargement des rapports...\"]}):!reportData?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500 dark:text-gray-400 py-20\",children:\"Aucun rapport disponible \\uD83D\\uDCED\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10\",children:[/*#__PURE__*/_jsx(StatCard,{title:\"Total R\\xE9servations\",value:totalReservations,color:\"text-blue-500\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Revenus Totaux\",value:\"\".concat(totalRevenue.toLocaleString(),\" FCFA\"),color:\"text-green-500\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Valid\\xE9es\",value:validatedCount,color:\"text-emerald-500\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Annul\\xE9es\",value:cancelledCount,color:\"text-red-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-card-dark p-6 rounded-xl shadow-md\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold text-lg mb-4 text-gray-700 dark:text-gray-200 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"w-5 h-5 text-primary\"}),\" R\\xE9servations par jour\"]}),dailyStats.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500\",children:\"Aucune statistique journali\\xE8re disponible.\"}):/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(BarChart,{data:dailyStats,children:[/*#__PURE__*/_jsx(XAxis,{dataKey:\"date\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"confirm\\xE9es\",fill:\"#3B82F6\"}),/*#__PURE__*/_jsx(Bar,{dataKey:\"annul\\xE9es\",fill:\"#EF4444\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-card-dark p-6 rounded-xl shadow-md\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold text-lg mb-4 text-gray-700 dark:text-gray-200 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(PieChart,{className:\"w-5 h-5 text-primary\"}),\" R\\xE9partition des statuts\"]}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(RPieChart,{children:[/*#__PURE__*/_jsx(Pie,{dataKey:\"value\",data:[{name:\"ConfirmÃ©es\",value:validatedCount},{name:\"AnnulÃ©es\",value:cancelledCount}],cx:\"50%\",cy:\"50%\",outerRadius:100,label:true,children:[validatedCount,cancelledCount].map((_,i)=>/*#__PURE__*/_jsx(Cell,{fill:COLORS[i%COLORS.length]},\"cell-\".concat(i)))}),/*#__PURE__*/_jsx(Tooltip,{})]})})]})]})]})]})});};// ðŸ§© Composant carte de statistiques\nconst StatCard=_ref2=>{let{title,value,color}=_ref2;return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:0.3},className:\"bg-white dark:bg-card-dark p-6 rounded-xl shadow-md text-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-gray-500 dark:text-gray-400 text-sm\",children:title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold \".concat(color),children:value})]});};export default AdminReports;","map":{"version":3,"names":["React","useEffect","useState","motion","FileText","Loader2","Download","BarChart3","PieChart","CalendarDays","Swal","XLSX","jsPDF","smartApi","BarChart","Bar","XAxis","YAxis","Tooltip","Legend","ResponsiveContainer","Pie","RPieChart","Cell","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminReports","_reportData$totalRese3","_reportData$totalReve3","_reportData$validated3","_reportData$cancelled3","reportData","setReportData","loading","setLoading","monthFilter","setMonthFilter","token","localStorage","getItem","fetchReport","_ref","_data$data","data","get","concat","headers","Authorization","err","console","error","fire","exportToExcel","_reportData$totalRese","_reportData$totalReve","_reportData$validated","_reportData$cancelled","wb","utils","book_new","reservations","Array","isArray","reservationsSheet","json_to_sheet","book_append_sheet","statsSheet","totalReservations","Number","totalRevenue","toLocaleString","validatedCount","cancelledCount","writeFile","exportToPDF","_reportData$totalRese2","_reportData$totalReve2","_reportData$validated2","_reportData$cancelled2","doc","setFontSize","text","Date","toLocaleDateString","autoTable","startY","head","body","save","COLORS","dailyStats","className","children","div","initial","opacity","y","animate","transition","duration","type","value","onChange","e","target","onClick","StatCard","title","color","length","width","height","dataKey","fill","name","cx","cy","outerRadius","label","map","_","i","_ref2"],"sources":["C:/React/kocrou-transport -Deploy/client/src/admin/pages/AdminReports.js"],"sourcesContent":["// client/src/admin/pages/AdminReports.js\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport {\r\n  FileText,\r\n  Loader2,\r\n  Download,\r\n  BarChart3,\r\n  PieChart,\r\n  CalendarDays,\r\n} from \"lucide-react\";\r\nimport Swal from \"sweetalert2\";\r\nimport * as XLSX from \"xlsx\";\r\nimport jsPDF from \"jspdf\";\r\nimport \"jspdf-autotable\";\r\nimport smartApi from \"../../utils/smartApi\";\r\nimport {\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n  Pie,\r\n  PieChart as RPieChart,\r\n  Cell,\r\n} from \"recharts\";\r\n\r\nconst AdminReports = () => {\r\n  const [reportData, setReportData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [monthFilter, setMonthFilter] = useState(\"\");\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  // ðŸŽ¯ Charger les donnÃ©es du backend (robuste : accepte data.data ou data)\r\n  const fetchReport = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const { data } = await smartApi.get(`/reports?month=${monthFilter}`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      // supporte { data: {...} } ou {...}\r\n      setReportData(data?.data ?? data ?? null);\r\n    } catch (err) {\r\n      console.error(\"Erreur chargement rapport :\", err);\r\n      Swal.fire(\"Erreur\", \"Impossible de charger les rapports.\", \"error\");\r\n      setReportData(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchReport();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [monthFilter]);\r\n\r\n  // ðŸ“Š GÃ©nÃ©ration Excel (sÃ©curisÃ©e)\r\n  const exportToExcel = () => {\r\n    if (!reportData) {\r\n      Swal.fire(\"Aucune donnÃ©e\", \"Aucun rapport Ã  exporter.\", \"info\");\r\n      return;\r\n    }\r\n    const wb = XLSX.utils.book_new();\r\n\r\n    const reservations = Array.isArray(reportData.reservations)\r\n      ? reportData.reservations\r\n      : [];\r\n\r\n    const reservationsSheet = XLSX.utils.json_to_sheet(reservations);\r\n    XLSX.utils.book_append_sheet(wb, reservationsSheet, \"RÃ©servations\");\r\n\r\n    const statsSheet = XLSX.utils.json_to_sheet([\r\n      {\r\n        \"Total RÃ©servations\": reportData.totalReservations ?? 0,\r\n        \"Total Revenus\": `${Number(reportData.totalRevenue ?? 0).toLocaleString()} FCFA`,\r\n        \"RÃ©servations ValidÃ©es\": reportData.validatedCount ?? 0,\r\n        \"RÃ©servations AnnulÃ©es\": reportData.cancelledCount ?? 0,\r\n      },\r\n    ]);\r\n    XLSX.utils.book_append_sheet(wb, statsSheet, \"Statistiques\");\r\n\r\n    XLSX.writeFile(wb, \"rapport_kocrou_transport.xlsx\");\r\n  };\r\n\r\n  // ðŸ“„ GÃ©nÃ©ration PDF (sÃ©curisÃ©e)\r\n  const exportToPDF = () => {\r\n    if (!reportData) {\r\n      Swal.fire(\"Aucune donnÃ©e\", \"Aucun rapport Ã  exporter.\", \"info\");\r\n      return;\r\n    }\r\n    const doc = new jsPDF();\r\n    doc.setFontSize(14);\r\n    doc.text(\"Rapport Kocrou Transport\", 14, 20);\r\n    doc.text(\r\n      `PÃ©riode : ${monthFilter || \"Tous les mois\"} - GÃ©nÃ©rÃ© le ${new Date().toLocaleDateString(\r\n        \"fr-FR\"\r\n      )}`,\r\n      14,\r\n      28\r\n    );\r\n\r\n    doc.autoTable({\r\n      startY: 35,\r\n      head: [[\"Type\", \"Valeur\"]],\r\n      body: [\r\n        [\"Total RÃ©servations\", reportData.totalReservations ?? 0],\r\n        [\"Total Revenus\", `${Number(reportData.totalRevenue ?? 0).toLocaleString()} FCFA`],\r\n        [\"ValidÃ©es\", reportData.validatedCount ?? 0],\r\n        [\"AnnulÃ©es\", reportData.cancelledCount ?? 0],\r\n      ],\r\n    });\r\n\r\n    doc.save(\"rapport_kocrou_transport.pdf\");\r\n  };\r\n\r\n  const COLORS = [\"#3B82F6\", \"#10B981\", \"#F59E0B\", \"#EF4444\"];\r\n\r\n  // Valeurs sÃ©curisÃ©es pour l'affichage\r\n  const totalReservations = reportData?.totalReservations ?? 0;\r\n  const totalRevenue = Number(reportData?.totalRevenue ?? 0);\r\n  const validatedCount = reportData?.validatedCount ?? 0;\r\n  const cancelledCount = reportData?.cancelledCount ?? 0;\r\n  const dailyStats = Array.isArray(reportData?.dailyStats) ? reportData.dailyStats : [];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 dark:bg-background-dark p-6\">\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 30 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.5 }}\r\n        className=\"max-w-6xl mx-auto\"\r\n      >\r\n        {/* ðŸ”¹ En-tÃªte */}\r\n        <div className=\"flex flex-col md:flex-row justify-between items-center gap-4 mb-8\">\r\n          <h1 className=\"text-2xl font-bold text-text-light dark:text-text-dark flex items-center gap-2\">\r\n            <FileText className=\"w-6 h-6 text-primary\" /> Rapports &amp;\r\n            Statistiques\r\n          </h1>\r\n\r\n          <div className=\"flex flex-wrap gap-3 items-center\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <CalendarDays className=\"text-primary w-4 h-4\" />\r\n              <input\r\n                type=\"month\"\r\n                value={monthFilter}\r\n                onChange={(e) => setMonthFilter(e.target.value)}\r\n                className=\"border rounded-lg px-3 py-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300\"\r\n              />\r\n            </div>\r\n\r\n            <button\r\n              onClick={fetchReport}\r\n              className=\"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition\"\r\n            >\r\n              Actualiser\r\n            </button>\r\n\r\n            <button\r\n              onClick={exportToExcel}\r\n              className=\"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition\"\r\n            >\r\n              <Download className=\"w-4 h-4\" /> Excel\r\n            </button>\r\n\r\n            <button\r\n              onClick={exportToPDF}\r\n              className=\"flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition\"\r\n            >\r\n              <Download className=\"w-4 h-4\" /> PDF\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ðŸ§¾ Contenu */}\r\n        {loading ? (\r\n          <div className=\"flex justify-center items-center py-20 text-gray-500 dark:text-gray-400\">\r\n            <Loader2 className=\"animate-spin w-6 h-6 mr-2 text-primary\" />\r\n            Chargement des rapports...\r\n          </div>\r\n        ) : !reportData ? (\r\n          <p className=\"text-center text-gray-500 dark:text-gray-400 py-20\">\r\n            Aucun rapport disponible ðŸ“­\r\n          </p>\r\n        ) : (\r\n          <>\r\n            {/* ðŸ”¸ Statistiques globales */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10\">\r\n              <StatCard\r\n                title=\"Total RÃ©servations\"\r\n                value={totalReservations}\r\n                color=\"text-blue-500\"\r\n              />\r\n              <StatCard\r\n                title=\"Revenus Totaux\"\r\n                value={`${totalRevenue.toLocaleString()} FCFA`}\r\n                color=\"text-green-500\"\r\n              />\r\n              <StatCard\r\n                title=\"ValidÃ©es\"\r\n                value={validatedCount}\r\n                color=\"text-emerald-500\"\r\n              />\r\n              <StatCard\r\n                title=\"AnnulÃ©es\"\r\n                value={cancelledCount}\r\n                color=\"text-red-500\"\r\n              />\r\n            </div>\r\n\r\n            {/* ðŸ“Š Graphiques */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-10\">\r\n              {/* ðŸ”¹ Histogramme */}\r\n              <div className=\"bg-white dark:bg-card-dark p-6 rounded-xl shadow-md\">\r\n                <h3 className=\"font-semibold text-lg mb-4 text-gray-700 dark:text-gray-200 flex items-center gap-2\">\r\n                  <BarChart3 className=\"w-5 h-5 text-primary\" /> RÃ©servations par jour\r\n                </h3>\r\n\r\n                {dailyStats.length === 0 ? (\r\n                  <p className=\"text-center text-gray-500\">Aucune statistique journaliÃ¨re disponible.</p>\r\n                ) : (\r\n                  <ResponsiveContainer width=\"100%\" height={300}>\r\n                    <BarChart data={dailyStats}>\r\n                      <XAxis dataKey=\"date\" />\r\n                      <YAxis />\r\n                      <Tooltip />\r\n                      <Legend />\r\n                      {/* safe keys: use properties if they exist, otherwise fallback to zero */}\r\n                      <Bar dataKey=\"confirmÃ©es\" fill=\"#3B82F6\" />\r\n                      <Bar dataKey=\"annulÃ©es\" fill=\"#EF4444\" />\r\n                    </BarChart>\r\n                  </ResponsiveContainer>\r\n                )}\r\n              </div>\r\n\r\n              {/* ðŸ”¸ Diagramme circulaire */}\r\n              <div className=\"bg-white dark:bg-card-dark p-6 rounded-xl shadow-md\">\r\n                <h3 className=\"font-semibold text-lg mb-4 text-gray-700 dark:text-gray-200 flex items-center gap-2\">\r\n                  <PieChart className=\"w-5 h-5 text-primary\" /> RÃ©partition des statuts\r\n                </h3>\r\n\r\n                <ResponsiveContainer width=\"100%\" height={300}>\r\n                  <RPieChart>\r\n                    <Pie\r\n                      dataKey=\"value\"\r\n                      data={[\r\n                        { name: \"ConfirmÃ©es\", value: validatedCount },\r\n                        { name: \"AnnulÃ©es\", value: cancelledCount },\r\n                      ]}\r\n                      cx=\"50%\"\r\n                      cy=\"50%\"\r\n                      outerRadius={100}\r\n                      label\r\n                    >\r\n                      {[validatedCount, cancelledCount].map((_, i) => (\r\n                        <Cell key={`cell-${i}`} fill={COLORS[i % COLORS.length]} />\r\n                      ))}\r\n                    </Pie>\r\n                    <Tooltip />\r\n                  </RPieChart>\r\n                </ResponsiveContainer>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </motion.div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ðŸ§© Composant carte de statistiques\r\nconst StatCard = ({ title, value, color }) => (\r\n  <motion.div\r\n    initial={{ opacity: 0, y: 10 }}\r\n    animate={{ opacity: 1, y: 0 }}\r\n    transition={{ duration: 0.3 }}\r\n    className=\"bg-white dark:bg-card-dark p-6 rounded-xl shadow-md text-center\"\r\n  >\r\n    <h4 className=\"text-gray-500 dark:text-gray-400 text-sm\">{title}</h4>\r\n    <p className={`text-2xl font-bold ${color}`}>{value}</p>\r\n  </motion.div>\r\n);\r\n\r\nexport default AdminReports;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}