{"ast":null,"code":"import{userApi,adminApi}from\"./api\";/* =========================================================\r\n   ðŸ§  DÃ©tection du contexte admin\r\n   ========================================================= */const isAdminContext=()=>{const pathname=window.location.pathname;const token=localStorage.getItem(\"adminToken\");return pathname.startsWith(\"/admin\")&&!!token;};/* =========================================================\r\n   ðŸ§© Wrapper intelligent autour des instances Axios\r\n   ========================================================= */const smartApi={get:function(){return isAdminContext()?adminApi.get(...arguments):userApi.get(...arguments);},post:function(){return isAdminContext()?adminApi.post(...arguments):userApi.post(...arguments);},put:function(){return isAdminContext()?adminApi.put(...arguments):userApi.put(...arguments);},delete:function(){return isAdminContext()?adminApi.delete(...arguments):userApi.delete(...arguments);},patch:function(){return isAdminContext()?adminApi.patch(...arguments):userApi.patch(...arguments);},/* âœ… Injecte dynamiquement le token dans lâ€™instance active */setAuthHeader:token=>{var _instance$defaults,_instance$defaults$he;const instance=isAdminContext()?adminApi:userApi;if(token&&instance!==null&&instance!==void 0&&(_instance$defaults=instance.defaults)!==null&&_instance$defaults!==void 0&&(_instance$defaults$he=_instance$defaults.headers)!==null&&_instance$defaults$he!==void 0&&_instance$defaults$he.common){instance.defaults.headers.common[\"Authorization\"]=\"Bearer \".concat(token);}else{var _instance$defaults2,_instance$defaults2$h,_instance$defaults2$h2;instance===null||instance===void 0?true:(_instance$defaults2=instance.defaults)===null||_instance$defaults2===void 0?true:(_instance$defaults2$h=_instance$defaults2.headers)===null||_instance$defaults2$h===void 0?true:(_instance$defaults2$h2=_instance$defaults2$h.common)===null||_instance$defaults2$h2===void 0?true:delete _instance$defaults2$h2[\"Authorization\"];}},/* âœ… AccÃ¨s direct Ã  lâ€™instance Axios active */getActiveInstance:()=>isAdminContext()?adminApi:userApi};export default smartApi;","map":{"version":3,"names":["userApi","adminApi","isAdminContext","pathname","window","location","token","localStorage","getItem","startsWith","smartApi","get","arguments","post","put","delete","patch","setAuthHeader","_instance$defaults","_instance$defaults$he","instance","defaults","headers","common","concat","_instance$defaults2","_instance$defaults2$h","_instance$defaults2$h2","getActiveInstance"],"sources":["C:/React/kocrou-transport -Deploy/client/src/utils/smartApi.js"],"sourcesContent":["import { userApi, adminApi } from \"./api\";\r\n\r\n/* =========================================================\r\n   ðŸ§  DÃ©tection du contexte admin\r\n   ========================================================= */\r\nconst isAdminContext = () => {\r\n  const pathname = window.location.pathname;\r\n  const token = localStorage.getItem(\"adminToken\");\r\n  return pathname.startsWith(\"/admin\") && !!token;\r\n};\r\n\r\n/* =========================================================\r\n   ðŸ§© Wrapper intelligent autour des instances Axios\r\n   ========================================================= */\r\nconst smartApi = {\r\n  get: (...args) => (isAdminContext() ? adminApi.get(...args) : userApi.get(...args)),\r\n  post: (...args) => (isAdminContext() ? adminApi.post(...args) : userApi.post(...args)),\r\n  put: (...args) => (isAdminContext() ? adminApi.put(...args) : userApi.put(...args)),\r\n  delete: (...args) => (isAdminContext() ? adminApi.delete(...args) : userApi.delete(...args)),\r\n  patch: (...args) => (isAdminContext() ? adminApi.patch(...args) : userApi.patch(...args)),\r\n\r\n  /* âœ… Injecte dynamiquement le token dans lâ€™instance active */\r\n  setAuthHeader: (token) => {\r\n    const instance = isAdminContext() ? adminApi : userApi;\r\n    if (token && instance?.defaults?.headers?.common) {\r\n      instance.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\r\n    } else {\r\n      delete instance?.defaults?.headers?.common?.[\"Authorization\"];\r\n    }\r\n  },\r\n\r\n  /* âœ… AccÃ¨s direct Ã  lâ€™instance Axios active */\r\n  getActiveInstance: () => (isAdminContext() ? adminApi : userApi),\r\n};\r\n\r\nexport default smartApi;"],"mappings":"AAAA,OAASA,OAAO,CAAEC,QAAQ,KAAQ,OAAO,CAEzC;AACA;AACA,+DACA,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAAC,QAAQ,CAAGC,MAAM,CAACC,QAAQ,CAACF,QAAQ,CACzC,KAAM,CAAAG,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAChD,MAAO,CAAAL,QAAQ,CAACM,UAAU,CAAC,QAAQ,CAAC,EAAI,CAAC,CAACH,KAAK,CACjD,CAAC,CAED;AACA;AACA,+DACA,KAAM,CAAAI,QAAQ,CAAG,CACfC,GAAG,CAAE,QAAAA,CAAA,QAAc,CAAAT,cAAc,CAAC,CAAC,CAAGD,QAAQ,CAACU,GAAG,CAAC,GAAAC,SAAO,CAAC,CAAGZ,OAAO,CAACW,GAAG,CAAC,GAAAC,SAAO,CAAC,EAAC,CACnFC,IAAI,CAAE,QAAAA,CAAA,QAAc,CAAAX,cAAc,CAAC,CAAC,CAAGD,QAAQ,CAACY,IAAI,CAAC,GAAAD,SAAO,CAAC,CAAGZ,OAAO,CAACa,IAAI,CAAC,GAAAD,SAAO,CAAC,EAAC,CACtFE,GAAG,CAAE,QAAAA,CAAA,QAAc,CAAAZ,cAAc,CAAC,CAAC,CAAGD,QAAQ,CAACa,GAAG,CAAC,GAAAF,SAAO,CAAC,CAAGZ,OAAO,CAACc,GAAG,CAAC,GAAAF,SAAO,CAAC,EAAC,CACnFG,MAAM,CAAE,QAAAA,CAAA,QAAc,CAAAb,cAAc,CAAC,CAAC,CAAGD,QAAQ,CAACc,MAAM,CAAC,GAAAH,SAAO,CAAC,CAAGZ,OAAO,CAACe,MAAM,CAAC,GAAAH,SAAO,CAAC,EAAC,CAC5FI,KAAK,CAAE,QAAAA,CAAA,QAAc,CAAAd,cAAc,CAAC,CAAC,CAAGD,QAAQ,CAACe,KAAK,CAAC,GAAAJ,SAAO,CAAC,CAAGZ,OAAO,CAACgB,KAAK,CAAC,GAAAJ,SAAO,CAAC,EAAC,CAEzF,6DACAK,aAAa,CAAGX,KAAK,EAAK,KAAAY,kBAAA,CAAAC,qBAAA,CACxB,KAAM,CAAAC,QAAQ,CAAGlB,cAAc,CAAC,CAAC,CAAGD,QAAQ,CAAGD,OAAO,CACtD,GAAIM,KAAK,EAAIc,QAAQ,SAARA,QAAQ,YAAAF,kBAAA,CAARE,QAAQ,CAAEC,QAAQ,UAAAH,kBAAA,YAAAC,qBAAA,CAAlBD,kBAAA,CAAoBI,OAAO,UAAAH,qBAAA,WAA3BA,qBAAA,CAA6BI,MAAM,CAAE,CAChDH,QAAQ,CAACC,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,WAAAC,MAAA,CAAalB,KAAK,CAAE,CACvE,CAAC,IAAM,KAAAmB,mBAAA,CAAAC,qBAAA,CAAAC,sBAAA,CACEP,QAAQ,SAARA,QAAQ,gBAAAK,mBAAA,CAARL,QAAQ,CAAEC,QAAQ,UAAAI,mBAAA,gBAAAC,qBAAA,CAAlBD,mBAAA,CAAoBH,OAAO,UAAAI,qBAAA,gBAAAC,sBAAA,CAA3BD,qBAAA,CAA6BH,MAAM,UAAAI,sBAAA,eAA1C,MAAO,CAAAA,sBAAA,CAAsC,eAAe,CAAC,CAC/D,CACF,CAAC,CAED,8CACAC,iBAAiB,CAAEA,CAAA,GAAO1B,cAAc,CAAC,CAAC,CAAGD,QAAQ,CAAGD,OAC1D,CAAC,CAED,cAAe,CAAAU,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}