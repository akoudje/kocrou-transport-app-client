{"ast":null,"code":"// client/src/routes/ProtectedAdminRoute.js\nimport React,{useEffect,useState,useContext}from\"react\";import{Navigate}from\"react-router-dom\";import{AuthContext}from\"../context/AuthContext\";// ✅ Ajouté\nimport smartApi from\"../utils/smartApi\";import{jsx as _jsx}from\"react/jsx-runtime\";const ProtectedAdminRoute=_ref=>{let{children}=_ref;const[isValid,setIsValid]=useState(null);const{checkAdmin}=useContext(AuthContext);useEffect(()=>{const verify=async()=>{const result=await checkAdmin();setIsValid(result);};verify();},[checkAdmin]);if(isValid===null)return null;// ou spinner\nif(!isValid)return/*#__PURE__*/_jsx(Navigate,{to:\"/admin-login\",replace:true});return children;};export default ProtectedAdminRoute;","map":{"version":3,"names":["React","useEffect","useState","useContext","Navigate","AuthContext","smartApi","jsx","_jsx","ProtectedAdminRoute","_ref","children","isValid","setIsValid","checkAdmin","verify","result","to","replace"],"sources":["C:/React/kocrou-transport -Deploy/client/src/components/ProtectedAdminRoute.js"],"sourcesContent":["// client/src/routes/ProtectedAdminRoute.js\r\nimport React, { useEffect, useState, useContext } from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\"; // ✅ Ajouté\r\nimport smartApi from \"../utils/smartApi\";\r\n\r\nconst ProtectedAdminRoute = ({ children }) => {\r\n  const [isValid, setIsValid] = useState(null);\r\n  const { checkAdmin } = useContext(AuthContext);\r\n\r\n  useEffect(() => {\r\n    const verify = async () => {\r\n      const result = await checkAdmin();\r\n      setIsValid(result);\r\n    };\r\n    verify();\r\n  }, [checkAdmin]);\r\n\r\n  if (isValid === null) return null; // ou spinner\r\n  if (!isValid) return <Navigate to=\"/admin-login\" replace />;\r\n  return children;\r\n};\r\n\r\nexport default ProtectedAdminRoute;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CAC9D,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,WAAW,KAAQ,wBAAwB,CAAE;AACtD,MAAO,CAAAC,QAAQ,KAAM,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEzC,KAAM,CAAAC,mBAAmB,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAEY,UAAW,CAAC,CAAGX,UAAU,CAACE,WAAW,CAAC,CAE9CJ,SAAS,CAAC,IAAM,CACd,KAAM,CAAAc,MAAM,CAAG,KAAAA,CAAA,GAAY,CACzB,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAF,UAAU,CAAC,CAAC,CACjCD,UAAU,CAACG,MAAM,CAAC,CACpB,CAAC,CACDD,MAAM,CAAC,CAAC,CACV,CAAC,CAAE,CAACD,UAAU,CAAC,CAAC,CAEhB,GAAIF,OAAO,GAAK,IAAI,CAAE,MAAO,KAAI,CAAE;AACnC,GAAI,CAACA,OAAO,CAAE,mBAAOJ,IAAA,CAACJ,QAAQ,EAACa,EAAE,CAAC,cAAc,CAACC,OAAO,MAAE,CAAC,CAC3D,MAAO,CAAAP,QAAQ,CACjB,CAAC,CAED,cAAe,CAAAF,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}